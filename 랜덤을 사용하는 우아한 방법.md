# 랜덤을 사용하는 우아한 방법

## 랜덤
### 오토마타
인공지능, 암호, ...
### 컴퓨터는 난수를 얻을 수 없다.
진성난수
    1. 자연현상에서 추출해야 함
    2. 하드웨어 보안 모듈
    3. 양자 난수 발생기
의사난수
    1. seed값
    2. 폰 노이만의 난수
        1. 8^n 주기의 난수를 생성함
        2. 현대에는 사용하지 않음
    3. rand함수
        1. srand 함수
        2. 최대값 = 0x7FFF
        3. LCG
            1. 보통 하위 비트가 난수의 품질이 더 좋음<br/>
                -> 하위비트만 잘라내서 사용
            2. Visual C++
                1. 싱글스레드
                    1. LCG
                2. 멀티스레드
                    1. _getptd()를 호출
                    2. Tls(Thread Discriptor)에 있는 값을 이용함
        4. rand 함수의 문제점
            1. 시스템(컴파일러)마다 다르게 동작함.
            2. srand에 보통 time을 사용하는데 이는 초단위임<br/>
                -> 기계에게 1초는 매우 긴 시간임.
            3. 최대값이 0x7FFF(=32768)
            4. srand를 이용한 next 값 변경 확인
            5. 멀티스레드 환경 영향 확인
            6. 시스템 별로 구현이 다를 수 있음
            *7. rand는 사용하지 말것*
    5. rand_s함수
        1. 일반 vs 보안 vs 헬퍼 함수군
            1. 보안이 중요하지 않을 경우 헬퍼 함수를 사용
                1. 보안 함수군은 사이즈가 넘을 경우 프로그램이 죽음
                2. 헬퍼는 그냥 잘라냄
        2. 장점
            1. srand함수가 없음
            2. 스레드 세이프함
            3. 운영체제 자원을 사용함
                1. 스레드  값, CPU 값 등등
        3. 단점
            1. 운영체제 자원을 사용하기 때문에 자주 호출하면 안됨
            2. 다른 운영체제에서 다르게 동작할 가능성이 있음
        4. _CRT_RAND_S를 Property에 쓰는 것을 가장 추천함
    6. 암호 서비스 공급자 사용
        1. 윈도우에서 제공
        2. CryptoGenRandom, RNGCryptoServiceProvider(.net)
            1. srand 호출 할 필요 없음.
            2. RtlGenRan 함수를 호출함(처리방식만 다름)
            3. 많은 자원을 소모함
    7. rand함수는 비균일 분포를 가짐.
        1. C++11
            1. Engine -> 난수를 얻어옴
            2. Distribution -> 필요한 구간으로 재배치(비균일 분포로도 만들 수 있음)
            3. Adaptor -> 난수열은 정해져 있음 -> 난수열을 조작하여 더 고품질의 난수를 제공함
            4. mt19937 -> 19937은 메르센 소수이다 -> 이 엔진이 가장 적절함(초당 500메가)
            5. std::random_device
                1. RtlGenRandom을 호출함
                2. 리눅스는 /dev/rand를 사용함.
                3. 임베디드 장치의 경우는 존재하지 않을 수도 있음.
            6. 리니어 엔진
                1. LCG
                2. 속도가 빠르고 단순함
            7. 메르센 트위스터 알고리즘
                1. mersenne_twister_engine
                2. 일반적으로 C++의 랜덤
                3. 큰 값이 필요하면 mt19937_64사용
                4. 적당한 난수 품질, 매우 긴 난수 수열 주기
            8. subtract_with_carry_eigine
                1. 특정 시스템에서 매우 빠르게 난수를 생성
                2. 초기값이 잘못되면 낮은 품질의 난수가 나옴
            9. 복합 엔진
                1. 값을 버리거나 섞음
            10. 소수가 필요하면 _generate_canonical
            11. 베르누이 분포
                1. 난수의 분포를 조절할 수 있음
            12. 이항 분포
                1. 베르누이는 무조건 일정확률(10 중 항상 2)
                2. 각각 일정확률
            13. 기하분포
                1. 자연스러운 변화를 보여줌
            14. 음이항분포
                1. 성공확률과 성공할 때까지 실패한 횟수를 난수값으로 제공
            15. 푸아송 분포
                1. 특정 기간에 특정 사건이 발생하는 횟수
            16. 지수분포
            17. 감마 분포
            18. 웨이블 푼포
            19. 정규분포